---
layout: post
current: post
cover: assets/project/project-2-3.png
navigation: True
title: 투두리스트 Chrome Extension (3) - 학습용 스톱워치 그리고 공부시간 수정하기
date: 2021-08-05 01:01:06
tags: project
class: post-template
subclass: 'post'
author: CodePurple
---
## 구현 아이디어
1. start 버튼 `addEventListener`에서 `click Event` 발생시 `startTimer()` 함수 실행 <br>
- 이 때, 다른 버튼 비활성화
- 타이머의 경우, `Date.now()`를 활용해 mileseconds 값을 Hh:Mm:Ss로 변환
2. 스톱워치 중지 시, Dropdown list에 등록된 할 일 중에 하나를 선택
- `change Event` 발생 시, 해당 option의 id를 local storage에 저장
- 추가 버튼 `click Event` 발생 시, local storage에서 id 비교 후 공부시간 수정
3. 화면에서 나갈 경우
- `onbeforeunload Event`를 통해, 나가는 시간 local storage에 저장
- 웹 켜졌을 경우, 현재 시간과 차이 계산해서 시간 수정 후 화면에 표시
<!--break-->

## 예상 구현 결과
- 공부 하는 시간 측정하는 스톱워치
- 등록되있는 할 일 중에 선택해서 공부시간 추가하기
- 화면에서 나가더라도 스톱워치 유지하기 

## Rate-Determining Step (걸림돌)
```javascript
Line:54
function totalUsageTimeEdit(event) { };
```
Dropdown list에서 할 일을 선택하는 순간, 바로 시간이 수정되는 것이 아니라 시간 수정 버튼을 눌렀을 경우에 시간이 수정되어야 된다. 
 이 때 `dropdown list`에서 `submit event`가 일어났을 때 정보를 받으려고 하니 list element 전부가 받아와져서 dropdown list에서 option의 id를 가져오는 데 어려움이 있었다. <br>
 `Local Storage`에 잠깐 dropdown list element의 id를 저장했다가 submit할 때 받는 형식으로 해결해봤다.

```javascript
Line:54
function totalUsageTimeEdit(event) { };

Line:77
function totalUsageTimeToSeconds(timeData) { };

Line:87
function secondsToHhMmSs(inputTime) { };
```
공부 시간을 기존 데이터에서 추가하는 과정에 있어서 `String`으로 표현된 시간을 수정하는 과정에서 전부 seconds로 바꿨다가 다시 `string`으로 전달하는 과정에서 코드의 실수가 꽤 잦았다.

## 구현 코드
{% gist 1776b5a902e50562af45839e4f7442df %}

